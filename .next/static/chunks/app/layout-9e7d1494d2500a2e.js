(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{41641:function(e,t,n){Promise.resolve().then(n.t.bind(n,58131,23)),Promise.resolve().then(n.bind(n,97817)),Promise.resolve().then(n.t.bind(n,69268,23))},22252:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(39763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},63639:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(39763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},65302:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(39763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},91723:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(39763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},33245:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(39763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},82431:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(39763).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},32489:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(39763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},99376:function(e,t,n){"use strict";var r=n(35475);n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},97817:function(e,t,n){"use strict";n.d(t,{Providers:function(){return N}});var r=n(57437),s=n(2265),i=n(91001),a=n(65302),o=n(22252),u=n(63639),l=n(33245),c=n(32489);let d=(0,s.createContext)(null),f={success:a.Z,error:o.Z,warning:u.Z,info:l.Z},h={success:"bg-success-50 border-success-200 text-success-800",error:"bg-danger-50 border-danger-200 text-danger-800",warning:"bg-warning-50 border-warning-200 text-warning-800",info:"bg-brand-50 border-brand-200 text-brand-800"},p={success:"text-success-500",error:"text-danger-500",warning:"text-warning-500",info:"text-brand-500"};function m(e){let{toast:t,onClose:n}=e,s=f[t.type];return(0,r.jsxs)("div",{className:(0,i.cn)("flex items-start gap-3 p-4 rounded-xl border shadow-lg animate-slide-in",h[t.type]),children:[(0,r.jsx)(s,{className:(0,i.cn)("w-5 h-5 flex-shrink-0 mt-0.5",p[t.type])}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-semibold",children:t.title}),t.message&&(0,r.jsx)("p",{className:"text-sm opacity-80 mt-0.5",children:t.message})]}),(0,r.jsx)("button",{onClick:n,className:"p-1 rounded-lg hover:bg-black/5 transition-colors",children:(0,r.jsx)(c.Z,{className:"w-4 h-4"})})]})}function v(e){let{children:t}=e,[n,i]=(0,s.useState)([]),a=(0,s.useCallback)(e=>{var t;let n=Math.random().toString(36).slice(2,9),r={...e,id:n};i(e=>[...e,r]);let s=null!==(t=e.duration)&&void 0!==t?t:5e3;s>0&&setTimeout(()=>{i(e=>e.filter(e=>e.id!==n))},s)},[]),o=(0,s.useCallback)(e=>{i(t=>t.filter(t=>t.id!==e))},[]);return(0,r.jsxs)(d.Provider,{value:{toasts:n,addToast:a,removeToast:o},children:[t,(0,r.jsx)("div",{className:"fixed bottom-20 left-4 right-4 z-50 space-y-2 pointer-events-none",children:n.map(e=>(0,r.jsx)("div",{className:"pointer-events-auto",children:(0,r.jsx)(m,{toast:e,onClose:()=>o(e.id)})},e.id))})]})}var x=n(14362),g=n(69734),y=n(5859);let k=(0,s.createContext)(null),w=["Descoberta","Perfil do Paciente","Hist\xf3rico de Sa\xfade","Avalia\xe7\xe3o Cl\xednica (ABEMID)","Independ\xeancia (Katz)","Responsabilidades","Frequ\xeancia e Hor\xe1rio","Proposta"];function b(e){let{children:t}=e,n=(0,y.q)(),i=n.getCurrentEvaluation(),a=(n.currentStep+1)/n.totalSteps*100,o=w[n.currentStep]||"",u=n.currentStep<n.totalSteps-1,l=n.currentStep>0,c=(0,s.useCallback)(()=>n.createEvaluation("evaluator-1"),[n]),d=(0,s.useCallback)(()=>{n.nextStep()},[n]),f={currentEvaluation:i,currentStep:n.currentStep,totalSteps:n.totalSteps,isLoading:!1,nextStep:n.nextStep,prevStep:n.prevStep,goToStep:n.goToStep,canGoNext:u,canGoPrev:l,progress:a,stepName:o,startNewEvaluation:c,saveAndContinue:d};return(0,r.jsx)(k.Provider,{value:f,children:t})}var S=n(36108),C=n(48614),E=n(40521),j=n(91723),P=n(82431);function M(){let{showSessionWarning:e,sessionExpiresIn:t,extendSession:n}=(0,x.aC)();return(0,r.jsx)(C.M,{children:e&&t&&(0,r.jsx)(E.E.div,{initial:{opacity:0,y:-100},animate:{opacity:1,y:0},exit:{opacity:0,y:-100},className:"fixed top-0 left-0 right-0 z-50 p-4 bg-warning-500 text-white",children:(0,r.jsxs)("div",{className:"container-mobile flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(j.Z,{className:"w-5 h-5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Sess\xe3o expirando"}),(0,r.jsxs)("p",{className:"text-sm text-warning-100",children:["Tempo restante: ","".concat(Math.floor(t/6e4),":").concat(Math.floor(t%6e4/1e3).toString().padStart(2,"0"))]})]})]}),(0,r.jsxs)(E.E.button,{whileTap:{scale:.95},onClick:n,className:"flex items-center gap-2 px-4 py-2 bg-white text-warning-600 rounded-lg font-medium",children:[(0,r.jsx)(P.Z,{className:"w-4 h-4"}),"Estender"]})]})})})}function N(e){let{children:t}=e;return(0,r.jsx)(g.f6,{defaultTheme:"system",children:(0,r.jsx)(S.g,{children:(0,r.jsx)(x.Ho,{children:(0,r.jsx)(b,{children:(0,r.jsxs)(v,{children:[t,(0,r.jsx)(M,{})]})})})})})}},14362:function(e,t,n){"use strict";n.d(t,{Ho:function(){return l},QL:function(){return d},aC:function(){return c}});var r=n(57437),s=n(2265),i=n(99376),a=n(64270);let o=(0,s.createContext)(null),u=["/login","/forgot-pin","/"];function l(e){let{children:t}=e,n=(0,i.useRouter)(),l=(0,i.usePathname)(),c=function(){let[e,t]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{t(!0)},[]),e}(),d=(0,a.t)(),[f,h]=(0,s.useState)(!1),[p,m]=(0,s.useState)(null),[v,x]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(!c)return;let e=setTimeout(()=>{(0,a.v)().then(()=>{x(!0)})},100);return()=>clearTimeout(e)},[c]),(0,s.useEffect)(()=>{if(!v)return;let e=()=>{if(!d.checkSession()&&!u.includes(l)){n.push("/login");return}if(d.session){let e=new Date(d.session.expiresAt).getTime()-Date.now();m(e),h(e>0&&e<3e5)}};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[v,l,n,d]),(0,s.useEffect)(()=>{if(!d.isAuthenticated)return;let e=()=>{d.recordActivity()},t=["mousedown","keydown","touchstart","scroll"];return t.forEach(t=>{window.addEventListener(t,e,{passive:!0})}),()=>{t.forEach(t=>{window.removeEventListener(t,e)})}},[d.isAuthenticated,d]),(0,s.useEffect)(()=>{if(!v)return;let e=u.includes(l);d.isAuthenticated||e?d.isAuthenticated&&"/login"===l&&n.push("/"):n.push("/login")},[v,d.isAuthenticated,l,n]);let g=(0,s.useCallback)(async e=>{let t=await d.loginWithPin(e);return t.success&&n.push("/"),t},[d,n]),y=(0,s.useCallback)(()=>{d.logout(),n.push("/login")},[d,n]),k=(0,s.useCallback)(()=>{d.refreshSession(),h(!1)},[d]),w=(0,s.useCallback)(e=>d.hasPermission(e),[d]),b={user:d.getCurrentUser(),isAuthenticated:d.isAuthenticated,isLoading:!v,permissions:d.getPermissions(),login:g,logout:y,hasPermission:w,showSessionWarning:f,sessionExpiresIn:p,extendSession:k};return(0,r.jsx)(o.Provider,{value:b,children:t})}function c(){let e=(0,s.useContext)(o);if(!e)throw Error("useAuth deve ser usado dentro de AuthProvider");return e}function d(e){let{isAuthenticated:t,isLoading:n,hasPermission:r}=c(),a=(0,i.useRouter)();return(0,s.useEffect)(()=>{if(!n){if(!t){a.push("/login");return}e&&!r(e)&&a.push("/unauthorized")}},[t,n,e,r,a]),{isLoading:n,isAuthorized:t&&(!e||r(e))}}},36108:function(e,t,n){"use strict";n.d(t,{g:function(){return a},j:function(){return o}});var r=n(57437),s=n(2265);let i=(0,s.createContext)(null);function a(e){let{children:t}=e,[n,a]=(0,s.useState)(!0),[o,u]=(0,s.useState)(!1),[l,c]=(0,s.useState)(0),[d,f]=(0,s.useState)(null);(0,s.useEffect)(()=>{a(navigator.onLine);let e=()=>a(!0),t=()=>a(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(()=>{u(!0)}),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]);let h=async()=>{f(new Date),c(0)};return(0,r.jsx)(i.Provider,{value:{isOnline:n,isOfflineReady:o,pendingSyncs:l,lastSyncTime:d,forceSync:h},children:t})}function o(){let e=(0,s.useContext)(i);if(!e)throw Error("useOffline deve ser usado dentro de OfflineProvider");return e}},69734:function(e,t,n){"use strict";n.d(t,{Fg:function(){return u},f6:function(){return o}});var r=n(57437),s=n(2265);let i=(0,s.createContext)(void 0),a="maos-amigas-theme";function o(e){let{children:t,defaultTheme:n="system"}=e,[o,u]=(0,s.useState)(n),[l,c]=(0,s.useState)("light"),[d,f]=(0,s.useState)(!1),h=(0,s.useCallback)(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),p=(0,s.useCallback)(e=>"system"===e?h():e,[h]),m=(0,s.useCallback)(e=>{let t=document.documentElement;t.classList.remove("light","dark"),t.classList.add(e),t.style.colorScheme=e},[]);(0,s.useEffect)(()=>{let e=localStorage.getItem(a)||n;u(e);let t=p(e);c(t),m(t),f(!0)},[n,p,m]),(0,s.useEffect)(()=>{if(!d)return;let e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>{if("system"===o){let e=h();c(e),m(e)}};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[o,d,h,m]);let v=(0,s.useCallback)(e=>{u(e),localStorage.setItem(a,e);let t=p(e);c(t),m(t)},[p,m]),x=(0,s.useCallback)(()=>{v("dark"===l?"light":"dark")},[l,v]);return d?(0,r.jsx)(i.Provider,{value:{theme:o,resolvedTheme:l,setTheme:v,toggleTheme:x},children:t}):(0,r.jsx)(i.Provider,{value:{theme:"system",resolvedTheme:"light",setTheme:()=>{},toggleTheme:()=>{}},children:t})}function u(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},91001:function(e,t,n){"use strict";n.d(t,{cn:function(){return i}});var r=n(61994),s=n(53335);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}},69268:function(){},58131:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3",variable:"__variable_f367f3"}},48614:function(e,t,n){"use strict";n.d(t,{M:function(){return x}});var r=n(57437),s=n(2265),i=n(58881),a=n(53576),o=n(64252),u=n(45750);class l extends s.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function c(e){let{children:t,isPresent:n}=e,i=(0,s.useId)(),a=(0,s.useRef)(null),o=(0,s.useRef)({width:0,height:0,top:0,left:0}),{nonce:c}=(0,s.useContext)(u._);return(0,s.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:s}=o.current;if(n||!a.current||!e||!t)return;a.current.dataset.motionPopId=i;let u=document.createElement("style");return c&&(u.nonce=c),document.head.appendChild(u),u.sheet&&u.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(r,"px !important;\n            left: ").concat(s,"px !important;\n          }\n        ")),()=>{document.head.removeChild(u)}},[n]),(0,r.jsx)(l,{isPresent:n,childRef:a,sizeRef:o,children:s.cloneElement(t,{ref:a})})}let d=e=>{let{children:t,initial:n,isPresent:i,onExitComplete:u,custom:l,presenceAffectsLayout:d,mode:h}=e,p=(0,a.h)(f),m=(0,s.useId)(),v=(0,s.useCallback)(e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;u&&u()},[p,u]),x=(0,s.useMemo)(()=>({id:m,initial:n,isPresent:i,custom:l,onExitComplete:v,register:e=>(p.set(e,!1),()=>p.delete(e))}),d?[Math.random(),v]:[i,v]);return(0,s.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[i]),s.useEffect(()=>{i||p.size||!u||u()},[i]),"popLayout"===h&&(t=(0,r.jsx)(c,{isPresent:i,children:t})),(0,r.jsx)(o.O.Provider,{value:x,children:t})};function f(){return new Map}var h=n(49637);let p=e=>e.key||"";function m(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}var v=n(11534);let x=e=>{let{children:t,custom:n,initial:o=!0,onExitComplete:u,presenceAffectsLayout:l=!0,mode:c="sync",propagate:f=!1}=e,[x,g]=(0,h.oO)(f),y=(0,s.useMemo)(()=>m(t),[t]),k=f&&!x?[]:y.map(p),w=(0,s.useRef)(!0),b=(0,s.useRef)(y),S=(0,a.h)(()=>new Map),[C,E]=(0,s.useState)(y),[j,P]=(0,s.useState)(y);(0,v.L)(()=>{w.current=!1,b.current=y;for(let e=0;e<j.length;e++){let t=p(j[e]);k.includes(t)?S.delete(t):!0!==S.get(t)&&S.set(t,!1)}},[j,k.length,k.join("-")]);let M=[];if(y!==C){let e=[...y];for(let t=0;t<j.length;t++){let n=j[t],r=p(n);k.includes(r)||(e.splice(t,0,n),M.push(n))}"wait"===c&&M.length&&(e=M),P(m(e)),E(y);return}let{forceRender:N}=(0,s.useContext)(i.p);return(0,r.jsx)(r.Fragment,{children:j.map(e=>{let t=p(e),s=(!f||!!x)&&(y===j||k.includes(t));return(0,r.jsx)(d,{isPresent:s,initial:(!w.current||!!o)&&void 0,custom:s?void 0:n,presenceAffectsLayout:l,mode:c,onExitComplete:s?void 0:()=>{if(!S.has(t))return;S.set(t,!0);let e=!0;S.forEach(t=>{t||(e=!1)}),e&&(null==N||N(),P(b.current),f&&(null==g||g()),u&&u())},children:e},t)})})}}},function(e){e.O(0,[5339,7825,6137,7230,4875,4270,5859,2971,2117,1744],function(){return e(e.s=41641)}),_N_E=e.O()}]);