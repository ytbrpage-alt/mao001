(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5254],{37348:function(e,t,n){Promise.resolve().then(n.bind(n,913))},22252:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(39763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},31047:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(39763).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},65302:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(39763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},92451:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(39763).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},10407:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(39763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},91723:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(39763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},83774:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(39763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},92369:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(39763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},45131:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(39763).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},99376:function(e,t,n){"use strict";var s=n(35475);n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})},913:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var s=n(57437),a=n(2265),i=n(40521),r=n(48614),l=n(65302),c=n(22252),o=n(45131),u=n(31047),d=n(92451),m=n(10407),h=n(92369),p=n(91723),x=n(83774),f=n(14362),g=n(91001);let y=(()=>{let e=new Date;return[{id:"1",date:e,startTime:"07:00",endTime:"19:00",patient:{name:"Maria Silva",age:82,address:"Rua das Flores, 123 - Apt 501",condition:"Alzheimer est\xe1gio inicial"},status:"confirmed"},{id:"2",date:new Date(e.getTime()+864e5),startTime:"19:00",endTime:"07:00",patient:{name:"Jo\xe3o Santos",age:75,address:"Av. Brasil, 456 - Casa",condition:"P\xf3s-AVC"},status:"confirmed"},{id:"3",date:new Date(e.getTime()+1728e5),startTime:"07:00",endTime:"19:00",patient:{name:"Ana Oliveira",age:68,address:"Rua Paran\xe1, 789 - Apt 102",condition:"DPOC"},status:"pending"},{id:"4",date:new Date(e.getTime()+2592e5),startTime:"07:00",endTime:"19:00",patient:{name:"Maria Silva",age:82,address:"Rua das Flores, 123 - Apt 501",condition:"Alzheimer est\xe1gio inicial"},status:"confirmed"},{id:"5",date:new Date(e.getTime()-864e5),startTime:"07:00",endTime:"19:00",patient:{name:"Pedro Costa",age:79,address:"Rua S\xe3o Paulo, 321",condition:"Diabetes tipo 2"},status:"completed"}]})(),j=e=>e.toLocaleDateString("pt-BR",{weekday:"short",day:"numeric",month:"short"}),v=(e,t)=>e.toDateString()===t.toDateString(),b=e=>{let t=[],n=new Date(e);n.setDate(n.getDate()-n.getDay());for(let e=0;e<7;e++){let s=new Date(n);s.setDate(n.getDate()+e),t.push(s)}return t},w=e=>{switch(e){case"confirmed":return{icon:l.Z,color:"text-success-600",bg:"bg-success-100",label:"Confirmado"};case"pending":return{icon:c.Z,color:"text-warning-600",bg:"bg-warning-100",label:"Pendente"};case"cancelled":return{icon:o.Z,color:"text-error-600",bg:"bg-error-100",label:"Cancelado"};case"completed":return{icon:l.Z,color:"text-neutral-500",bg:"bg-neutral-100",label:"Conclu\xeddo"}}};function N(){let{user:e}=(0,f.aC)(),[t,n]=(0,a.useState)(new Date),[l,o]=(0,a.useState)(new Date),[N,k]=(0,a.useState)(null),C=b(t),P=new Date,Z=y.filter(e=>v(e.date,l)),E=e=>{let s=new Date(t);s.setDate(s.getDate()+("next"===e?7:-7)),n(s)},D=e=>y.filter(t=>v(t.date,e));return(0,s.jsxs)("div",{className:"space-y-4 pb-4",children:[(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[(0,s.jsxs)("h1",{className:"text-xl font-semibold text-neutral-900 flex items-center gap-2",children:[(0,s.jsx)(u.Z,{className:"w-6 h-6 text-brand-500"}),"Minha Agenda"]}),(0,s.jsx)("p",{className:"text-sm text-neutral-500 mt-1",suppressHydrationWarning:!0,children:P.toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"})})]}),(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"card p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("button",{onClick:()=>E("prev"),className:"p-2 rounded-lg hover:bg-neutral-100 transition-colors",children:(0,s.jsx)(d.Z,{className:"w-5 h-5 text-neutral-600"})}),(0,s.jsx)("span",{className:"font-medium text-neutral-900",children:C[0].toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}),(0,s.jsx)("button",{onClick:()=>E("next"),className:"p-2 rounded-lg hover:bg-neutral-100 transition-colors",children:(0,s.jsx)(m.Z,{className:"w-5 h-5 text-neutral-600"})})]}),(0,s.jsx)("div",{className:"grid grid-cols-7 gap-1",children:C.map((e,t)=>{let n=v(e,l),a=v(e,P),i=D(e).length>0;return(0,s.jsxs)("button",{onClick:()=>o(e),className:(0,g.cn)("flex flex-col items-center py-2 px-1 rounded-lg transition-colors relative",n?"bg-brand-500 text-white":a?"bg-brand-100 text-brand-700":"hover:bg-neutral-100"),children:[(0,s.jsx)("span",{className:"text-xs opacity-70",children:e.toLocaleDateString("pt-BR",{weekday:"short"}).slice(0,3)}),(0,s.jsx)("span",{className:"text-lg font-semibold",children:e.getDate()}),i&&(0,s.jsx)("span",{className:(0,g.cn)("w-1.5 h-1.5 rounded-full mt-1",n?"bg-white":"bg-brand-500")})]},t)})})]}),(0,s.jsxs)(i.E.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-3",children:[(0,s.jsxs)("h2",{className:"font-medium text-neutral-900",children:["Plant\xf5es - ",j(l)]}),(0,s.jsx)(r.M,{mode:"wait",children:0===Z.length?(0,s.jsxs)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"card text-center py-8",children:[(0,s.jsx)(u.Z,{className:"w-12 h-12 text-neutral-300 mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-neutral-500",children:"Nenhum plant\xe3o agendado para este dia"})]},"empty"):(0,s.jsx)("div",{className:"space-y-3",children:Z.map((e,t)=>{let n=w(e.status),a=n.icon;return(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},onClick:()=>k(e),className:"card p-4 cursor-pointer hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-brand-100 flex items-center justify-center",children:(0,s.jsx)(h.Z,{className:"w-5 h-5 text-brand-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-neutral-900",children:e.patient.name}),(0,s.jsxs)("p",{className:"text-sm text-neutral-500",children:[e.patient.age," anos â€¢ ",e.patient.condition]})]})]}),(0,s.jsxs)("span",{className:(0,g.cn)("flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",n.bg,n.color),children:[(0,s.jsx)(a,{className:"w-3.5 h-3.5"}),n.label]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-neutral-600",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:[e.startTime," - ",e.endTime]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-neutral-600",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"truncate",children:e.patient.address.split(",")[0]})]})]})]},e.id)})})})]}),(0,s.jsx)(r.M,{children:N&&(0,s.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-end z-50",onClick:()=>k(null),children:(0,s.jsxs)(i.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},onClick:e=>e.stopPropagation(),className:"bg-white w-full rounded-t-3xl p-6 max-h-[80vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"w-12 h-1 bg-neutral-300 rounded-full mx-auto mb-6"}),(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Detalhes do Plant\xe3o"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-14 h-14 rounded-full bg-brand-100 flex items-center justify-center",children:(0,s.jsx)(h.Z,{className:"w-7 h-7 text-brand-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:N.patient.name}),(0,s.jsxs)("p",{className:"text-neutral-500",children:[N.patient.age," anos"]})]})]}),(0,s.jsxs)("div",{className:"grid gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-neutral-50 rounded-xl",children:[(0,s.jsx)(p.Z,{className:"w-5 h-5 text-neutral-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:"Hor\xe1rio"}),(0,s.jsxs)("p",{className:"font-medium",children:[N.startTime," - ",N.endTime]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-neutral-50 rounded-xl",children:[(0,s.jsx)(x.Z,{className:"w-5 h-5 text-neutral-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:"Endere\xe7o"}),(0,s.jsx)("p",{className:"font-medium",children:N.patient.address})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-neutral-50 rounded-xl",children:[(0,s.jsx)(c.Z,{className:"w-5 h-5 text-neutral-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:"Condi\xe7\xe3o"}),(0,s.jsx)("p",{className:"font-medium",children:N.patient.condition})]})]})]}),(0,s.jsx)("button",{className:"w-full btn-primary mt-4",children:"Ver Prontu\xe1rio do Paciente"})]})]})})})]})}},14362:function(e,t,n){"use strict";n.d(t,{Ho:function(){return o},QL:function(){return d},aC:function(){return u}});var s=n(57437),a=n(2265),i=n(99376),r=n(64270);let l=(0,a.createContext)(null),c=["/login","/forgot-pin","/"];function o(e){let{children:t}=e,n=(0,i.useRouter)(),o=(0,i.usePathname)(),u=function(){let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t(!0)},[]),e}(),d=(0,r.t)(),[m,h]=(0,a.useState)(!1),[p,x]=(0,a.useState)(null),[f,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!u)return;let e=setTimeout(()=>{(0,r.v)().then(()=>{g(!0)})},100);return()=>clearTimeout(e)},[u]),(0,a.useEffect)(()=>{if(!f)return;let e=()=>{if(!d.checkSession()&&!c.includes(o)){n.push("/login");return}if(d.session){let e=new Date(d.session.expiresAt).getTime()-Date.now();x(e),h(e>0&&e<3e5)}};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[f,o,n,d]),(0,a.useEffect)(()=>{if(!d.isAuthenticated)return;let e=()=>{d.recordActivity()},t=["mousedown","keydown","touchstart","scroll"];return t.forEach(t=>{window.addEventListener(t,e,{passive:!0})}),()=>{t.forEach(t=>{window.removeEventListener(t,e)})}},[d.isAuthenticated,d]),(0,a.useEffect)(()=>{if(!f)return;let e=c.includes(o);d.isAuthenticated||e?d.isAuthenticated&&"/login"===o&&n.push("/"):n.push("/login")},[f,d.isAuthenticated,o,n]);let y=(0,a.useCallback)(async e=>{let t=await d.loginWithPin(e);return t.success&&n.push("/"),t},[d,n]),j=(0,a.useCallback)(()=>{d.logout(),n.push("/login")},[d,n]),v=(0,a.useCallback)(()=>{d.refreshSession(),h(!1)},[d]),b=(0,a.useCallback)(e=>d.hasPermission(e),[d]),w={user:d.getCurrentUser(),isAuthenticated:d.isAuthenticated,isLoading:!f,permissions:d.getPermissions(),login:y,logout:j,hasPermission:b,showSessionWarning:m,sessionExpiresIn:p,extendSession:v};return(0,s.jsx)(l.Provider,{value:w,children:t})}function u(){let e=(0,a.useContext)(l);if(!e)throw Error("useAuth deve ser usado dentro de AuthProvider");return e}function d(e){let{isAuthenticated:t,isLoading:n,hasPermission:s}=u(),r=(0,i.useRouter)();return(0,a.useEffect)(()=>{if(!n){if(!t){r.push("/login");return}e&&!s(e)&&r.push("/unauthorized")}},[t,n,e,s,r]),{isLoading:n,isAuthorized:t&&(!e||s(e))}}},91001:function(e,t,n){"use strict";n.d(t,{cn:function(){return i}});var s=n(61994),a=n(53335);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,s.W)(t))}},48614:function(e,t,n){"use strict";n.d(t,{M:function(){return g}});var s=n(57437),a=n(2265),i=n(58881),r=n(53576),l=n(64252),c=n(45750);class o extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function u(e){let{children:t,isPresent:n}=e,i=(0,a.useId)(),r=(0,a.useRef)(null),l=(0,a.useRef)({width:0,height:0,top:0,left:0}),{nonce:u}=(0,a.useContext)(c._);return(0,a.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:a}=l.current;if(n||!r.current||!e||!t)return;r.current.dataset.motionPopId=i;let c=document.createElement("style");return u&&(c.nonce=u),document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(s,"px !important;\n            left: ").concat(a,"px !important;\n          }\n        ")),()=>{document.head.removeChild(c)}},[n]),(0,s.jsx)(o,{isPresent:n,childRef:r,sizeRef:l,children:a.cloneElement(t,{ref:r})})}let d=e=>{let{children:t,initial:n,isPresent:i,onExitComplete:c,custom:o,presenceAffectsLayout:d,mode:h}=e,p=(0,r.h)(m),x=(0,a.useId)(),f=(0,a.useCallback)(e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;c&&c()},[p,c]),g=(0,a.useMemo)(()=>({id:x,initial:n,isPresent:i,custom:o,onExitComplete:f,register:e=>(p.set(e,!1),()=>p.delete(e))}),d?[Math.random(),f]:[i,f]);return(0,a.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[i]),a.useEffect(()=>{i||p.size||!c||c()},[i]),"popLayout"===h&&(t=(0,s.jsx)(u,{isPresent:i,children:t})),(0,s.jsx)(l.O.Provider,{value:g,children:t})};function m(){return new Map}var h=n(49637);let p=e=>e.key||"";function x(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}var f=n(11534);let g=e=>{let{children:t,custom:n,initial:l=!0,onExitComplete:c,presenceAffectsLayout:o=!0,mode:u="sync",propagate:m=!1}=e,[g,y]=(0,h.oO)(m),j=(0,a.useMemo)(()=>x(t),[t]),v=m&&!g?[]:j.map(p),b=(0,a.useRef)(!0),w=(0,a.useRef)(j),N=(0,r.h)(()=>new Map),[k,C]=(0,a.useState)(j),[P,Z]=(0,a.useState)(j);(0,f.L)(()=>{b.current=!1,w.current=j;for(let e=0;e<P.length;e++){let t=p(P[e]);v.includes(t)?N.delete(t):!0!==N.get(t)&&N.set(t,!1)}},[P,v.length,v.join("-")]);let E=[];if(j!==k){let e=[...j];for(let t=0;t<P.length;t++){let n=P[t],s=p(n);v.includes(s)||(e.splice(t,0,n),E.push(n))}"wait"===u&&E.length&&(e=E),Z(x(e)),C(j);return}let{forceRender:D}=(0,a.useContext)(i.p);return(0,s.jsx)(s.Fragment,{children:P.map(e=>{let t=p(e),a=(!m||!!g)&&(j===P||v.includes(t));return(0,s.jsx)(d,{isPresent:a,initial:(!b.current||!!l)&&void 0,custom:a?void 0:n,presenceAffectsLayout:o,mode:u,onExitComplete:a?void 0:()=>{if(!N.has(t))return;N.set(t,!0);let e=!0;N.forEach(t=>{t||(e=!1)}),e&&(null==D||D(),Z(w.current),m&&(null==y||y()),c&&c())},children:e},t)})})}}},function(e){e.O(0,[6137,7230,4875,4270,2971,2117,1744],function(){return e(e.s=37348)}),_N_E=e.O()}]);