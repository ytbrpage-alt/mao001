(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2949],{32011:function(e,t,a){Promise.resolve().then(a.bind(a,21798))},21798:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var s=a(57437),n=a(2265),r=a(40521),l=a(48614),i=a(91723),c=a(22252),d=a(65302),u=a(48736),o=a(73247),x=a(92369),m=a(10407),p=a(92735),h=a(14362),b=a(91001),y=a(5341),f=a(95775),g=a(84122),N=a(34862);let j=(()=>{let e=new Date;return[{id:"1",date:e,patientName:"Maria Silva",type:"daily",status:"submitted",summary:"Paciente est\xe1vel. Realizadas todas as atividades previstas."},{id:"2",date:(0,y.k)(e,1),patientName:"Maria Silva",type:"daily",status:"approved",summary:"Dia tranquilo. Paciente alimentou-se bem."},{id:"3",date:(0,y.k)(e,2),patientName:"Jo\xe3o Santos",type:"weekly",status:"approved",summary:"Relat\xf3rio semanal com evolu\xe7\xe3o positiva."},{id:"4",date:(0,y.k)(e,3),patientName:"Maria Silva",type:"incident",status:"pending",summary:"Paciente apresentou queda de press\xe3o \xe0s 15h."},{id:"5",date:(0,y.k)(e,5),patientName:"Ana Oliveira",type:"daily",status:"approved",summary:"Acompanhamento regular sem intercorr\xeancias."}]})(),v=e=>{switch(e){case"daily":return{label:"Di\xe1rio",color:"text-brand-600",bg:"bg-brand-100"};case"weekly":return{label:"Semanal",color:"text-purple-600",bg:"bg-purple-100"};case"incident":return{label:"Ocorr\xeancia",color:"text-warning-600",bg:"bg-warning-100"}}},w=e=>{switch(e){case"submitted":return{label:"Enviado",icon:i.Z,color:"text-brand-600",bg:"bg-brand-100"};case"pending":return{label:"Pendente",icon:c.Z,color:"text-warning-600",bg:"bg-warning-100"};case"approved":return{label:"Aprovado",icon:d.Z,color:"text-success-600",bg:"bg-success-100"}}};function k(){let{user:e}=(0,h.aC)(),[t,a]=(0,n.useState)("all"),[i,c]=(0,n.useState)(""),[d,k]=(0,n.useState)(null),E=j.filter(e=>{let a="all"===t||e.type===t,s=e.patientName.toLowerCase().includes(i.toLowerCase())||e.summary.toLowerCase().includes(i.toLowerCase());return a&&s}),C={total:j.length,pending:j.filter(e=>"pending"===e.status).length,thisWeek:j.filter(e=>(0,f._)(e.date,{start:(0,y.k)(new Date,7),end:new Date})).length};return(0,s.jsxs)("div",{className:"space-y-4 pb-20",children:[(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[(0,s.jsxs)("h1",{className:"text-xl font-semibold text-neutral-900 dark:text-neutral-100 flex items-center gap-2",children:[(0,s.jsx)(u.Z,{className:"w-6 h-6 text-brand-500"}),"Meus Relat\xf3rios"]}),(0,s.jsx)("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:"Acompanhe seus relat\xf3rios e evolu\xe7\xf5es"})]}),(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-3 gap-3",children:[(0,s.jsxs)("div",{className:"card text-center py-4",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-neutral-900 dark:text-neutral-100",children:C.total}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Total"})]}),(0,s.jsxs)("div",{className:"card text-center py-4",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-warning-600",children:C.pending}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Pendentes"})]}),(0,s.jsxs)("div",{className:"card text-center py-4",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-brand-600",children:C.thisWeek}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Esta semana"})]})]}),(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"space-y-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),(0,s.jsx)("input",{type:"text",value:i,onChange:e=>c(e.target.value),placeholder:"Buscar relat\xf3rios...",className:"input-base pl-10"})]}),(0,s.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:["all","daily","weekly","incident"].map(e=>(0,s.jsx)("button",{onClick:()=>a(e),className:(0,b.cn)("px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors",t===e?"bg-brand-500 text-white":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300"),children:"all"===e?"Todos":"daily"===e?"Di\xe1rios":"weekly"===e?"Semanais":"Ocorr\xeancias"},e))})]}),(0,s.jsxs)(r.E.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},whileTap:{scale:.98},className:"w-full btn-primary py-3",children:[(0,s.jsx)(u.Z,{className:"w-5 h-5 mr-2"}),"Novo Relat\xf3rio"]}),(0,s.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.25},className:"space-y-3",children:(0,s.jsx)(l.M,{mode:"popLayout",children:0===E.length?(0,s.jsxs)(r.E.div,{initial:{opacity:0},animate:{opacity:1},className:"card text-center py-12",children:[(0,s.jsx)(u.Z,{className:"w-12 h-12 mx-auto text-neutral-300 dark:text-neutral-600 mb-3"}),(0,s.jsx)("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Nenhum relat\xf3rio encontrado"})]}):E.map((e,t)=>{let a=v(e.type),n=w(e.status),l=n.icon;return(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{delay:.05*t},onClick:()=>k(e),className:"card cursor-pointer hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-brand-100 dark:bg-brand-900/30 flex items-center justify-center",children:(0,s.jsx)(x.Z,{className:"w-5 h-5 text-brand-600 dark:text-brand-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:e.patientName}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:(0,g.WU)(e.date,"dd 'de' MMMM",{locale:N.F})})]})]}),(0,s.jsx)(m.Z,{className:"w-5 h-5 text-neutral-400"})]}),(0,s.jsx)("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 line-clamp-2 mb-3",children:e.summary}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:(0,b.cn)("badge text-xs",a.bg,a.color),children:a.label}),(0,s.jsxs)("span",{className:(0,b.cn)("badge text-xs flex items-center gap-1",n.bg,n.color),children:[(0,s.jsx)(l,{className:"w-3 h-3"}),n.label]})]})]},e.id)})})}),(0,s.jsx)(l.M,{children:d&&(0,s.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-end",onClick:()=>k(null),children:(0,s.jsxs)(r.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},onClick:e=>e.stopPropagation(),className:"w-full bg-white dark:bg-neutral-900 rounded-t-3xl p-6 max-h-[80vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"w-12 h-1 bg-neutral-300 dark:bg-neutral-600 rounded-full mx-auto mb-6"}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-brand-100 dark:bg-brand-900/30 flex items-center justify-center",children:(0,s.jsx)(x.Z,{className:"w-6 h-6 text-brand-600 dark:text-brand-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100",children:d.patientName}),(0,s.jsx)("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:(0,g.WU)(d.date,"EEEE, dd 'de' MMMM 'de' yyyy",{locale:N.F})})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,s.jsx)("span",{className:(0,b.cn)("badge",v(d.type).bg,v(d.type).color),children:v(d.type).label}),(0,s.jsxs)("span",{className:(0,b.cn)("badge flex items-center gap-1",w(d.status).bg,w(d.status).color),children:[(()=>{let e=w(d.status).icon;return(0,s.jsx)(e,{className:"w-3 h-3"})})(),w(d.status).label]})]}),(0,s.jsxs)("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800 rounded-xl mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 mb-2",children:"Resumo"}),(0,s.jsx)("p",{className:"text-neutral-600 dark:text-neutral-300",children:d.summary})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("button",{className:"flex-1 btn-secondary flex items-center justify-center gap-2",children:[(0,s.jsx)(p.Z,{className:"w-5 h-5"}),"Baixar PDF"]}),(0,s.jsx)("button",{onClick:()=>k(null),className:"flex-1 btn-primary",children:"Fechar"})]})]})})})]})}},14362:function(e,t,a){"use strict";a.d(t,{Ho:function(){return d},QL:function(){return o},aC:function(){return u}});var s=a(57437),n=a(2265),r=a(99376),l=a(64270);let i=(0,n.createContext)(null),c=["/login","/forgot-pin","/"];function d(e){let{children:t}=e,a=(0,r.useRouter)(),d=(0,r.usePathname)(),u=function(){let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{t(!0)},[]),e}(),o=(0,l.t)(),[x,m]=(0,n.useState)(!1),[p,h]=(0,n.useState)(null),[b,y]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!u)return;let e=setTimeout(()=>{(0,l.v)().then(()=>{y(!0)})},100);return()=>clearTimeout(e)},[u]),(0,n.useEffect)(()=>{if(!b)return;let e=()=>{if(!o.checkSession()&&!c.includes(d)){a.push("/login");return}if(o.session){let e=new Date(o.session.expiresAt).getTime()-Date.now();h(e),m(e>0&&e<3e5)}};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[b,d,a,o]),(0,n.useEffect)(()=>{if(!o.isAuthenticated)return;let e=()=>{o.recordActivity()},t=["mousedown","keydown","touchstart","scroll"];return t.forEach(t=>{window.addEventListener(t,e,{passive:!0})}),()=>{t.forEach(t=>{window.removeEventListener(t,e)})}},[o.isAuthenticated,o]),(0,n.useEffect)(()=>{if(!b)return;let e=c.includes(d);o.isAuthenticated||e?o.isAuthenticated&&"/login"===d&&a.push("/"):a.push("/login")},[b,o.isAuthenticated,d,a]);let f=(0,n.useCallback)(async e=>{let t=await o.loginWithPin(e);return t.success&&a.push("/"),t},[o,a]),g=(0,n.useCallback)(()=>{o.logout(),a.push("/login")},[o,a]),N=(0,n.useCallback)(()=>{o.refreshSession(),m(!1)},[o]),j=(0,n.useCallback)(e=>o.hasPermission(e),[o]),v={user:o.getCurrentUser(),isAuthenticated:o.isAuthenticated,isLoading:!b,permissions:o.getPermissions(),login:f,logout:g,hasPermission:j,showSessionWarning:x,sessionExpiresIn:p,extendSession:N};return(0,s.jsx)(i.Provider,{value:v,children:t})}function u(){let e=(0,n.useContext)(i);if(!e)throw Error("useAuth deve ser usado dentro de AuthProvider");return e}function o(e){let{isAuthenticated:t,isLoading:a,hasPermission:s}=u(),l=(0,r.useRouter)();return(0,n.useEffect)(()=>{if(!a){if(!t){l.push("/login");return}e&&!s(e)&&l.push("/unauthorized")}},[t,a,e,s,l]),{isLoading:a,isAuthorized:t&&(!e||s(e))}}},91001:function(e,t,a){"use strict";a.d(t,{cn:function(){return r}});var s=a(61994),n=a(53335);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,s.W)(t))}}},function(e){e.O(0,[6137,7230,4875,2859,4122,995,4270,2971,2117,1744],function(){return e(e.s=32011)}),_N_E=e.O()}]);