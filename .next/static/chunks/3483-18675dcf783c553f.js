"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3483],{91001:function(e,t,n){n.d(t,{cn:function(){return r}});var a=n(61994),i=n(53335);function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.m6)((0,a.W)(t))}},41098:function(e,t,n){n.d(t,{k:function(){return l}});var a=n(59625),i=n(89134),r=n(49360),s=n(64270),o=n(56812);let c={evaluation_created:{category:"evaluation",severity:"info"},evaluation_updated:{category:"evaluation",severity:"info"},evaluation_deleted:{category:"evaluation",severity:"warning"},evaluation_status_changed:{category:"evaluation",severity:"info"},evaluation_exported:{category:"document",severity:"info"},discovery_updated:{category:"evaluation",severity:"info"},patient_updated:{category:"evaluation",severity:"info"},health_history_updated:{category:"evaluation",severity:"info"},abemid_updated:{category:"evaluation",severity:"info"},katz_updated:{category:"evaluation",severity:"info"},lawton_updated:{category:"evaluation",severity:"info"},safety_checklist_updated:{category:"evaluation",severity:"info"},schedule_updated:{category:"evaluation",severity:"info"},results_calculated:{category:"evaluation",severity:"info"},proposal_generated:{category:"document",severity:"info"},proposal_sent:{category:"document",severity:"info"},proposal_accepted:{category:"document",severity:"info"},proposal_rejected:{category:"document",severity:"warning"},contract_generated:{category:"document",severity:"info"},contract_signed:{category:"document",severity:"info"},user_created:{category:"user",severity:"info"},user_updated:{category:"user",severity:"info"},user_deleted:{category:"user",severity:"warning"},user_login:{category:"authentication",severity:"info"},user_logout:{category:"authentication",severity:"info"},user_pin_changed:{category:"authentication",severity:"info"},user_pin_reset:{category:"authentication",severity:"warning"},user_locked:{category:"authentication",severity:"critical"},user_unlocked:{category:"authentication",severity:"warning"},sync_started:{category:"system",severity:"info"},sync_completed:{category:"system",severity:"info"},sync_failed:{category:"system",severity:"critical"},data_exported:{category:"system",severity:"info"},data_imported:{category:"system",severity:"warning"}},u={"patient.fullName":"Nome completo","patient.birthDate":"Data de nascimento","patient.cpf":"CPF","patient.maritalStatus":"Estado civil","patient.preferredName":"Nome preferido","healthHistory.neurologicalConditions":"Condi\xe7\xf5es neurol\xf3gicas","healthHistory.cardiovascularConditions":"Condi\xe7\xf5es cardiovasculares","healthHistory.medicationCount":"Quantidade de medicamentos","abemid.consciousness":"N\xedvel de consci\xeancia","abemid.breathing":"Padr\xe3o respirat\xf3rio","abemid.totalScore":"Pontua\xe7\xe3o total ABEMID","abemid.indicatedProfessional":"Profissional indicado","katz.bathing":"Banho","katz.dressing":"Vestir","katz.totalScore":"Pontua\xe7\xe3o total Katz","katz.classification":"Classifica\xe7\xe3o Katz","schedule.startTime":"Hor\xe1rio de in\xedcio","schedule.endTime":"Hor\xe1rio de t\xe9rmino","schedule.weekDays":"Dias da semana",status:"Status"},l=(0,a.Ue)()((0,i.tJ)((e,t)=>({entries:{},snapshots:{},retentionConfig:{retentionDays:365,archiveBeforeDelete:!0,autoCleanup:!0,cleanupSchedule:"weekly"},log:function(t,n,a,i){let u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=s.t.getState().session,d=(0,r.Z)(),y=c[t],g={id:d,timestamp:new Date,eventType:t,category:y.category,severity:y.severity,userId:(null==l?void 0:l.userId)||"system",userName:(null==l?void 0:l.user.fullName)||"Sistema",userRole:(null==l?void 0:l.user.role)||"system",entityType:n,entityId:a,entityName:u.entityName,description:i,changes:u.changes,metadata:u.metadata,deviceId:(0,o.ni)(),sessionId:(null==l?void 0:l.token)||"no-session",synced:!1};return e(e=>({entries:{...e.entries,[d]:g}})),d},createSnapshot:(n,a,i)=>{let o=s.t.getState().session,c="".concat(n,":").concat(a),u=t().snapshots[c]||[],l=u.length+1,d={id:(0,r.Z)(),entityType:n,entityId:a,version:l,timestamp:new Date,userId:(null==o?void 0:o.userId)||"system",userName:(null==o?void 0:o.user.fullName)||"Sistema",data:i,checksum:function(e){let t=JSON.stringify(e),n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n&=n;return Math.abs(n).toString(16).padStart(8,"0")}(i)};e(e=>({snapshots:{...e.snapshots,[c]:[...u,d]}}))},getEntries:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,i=Object.values(t().entries).filter(t=>{var n,a,i,r;if(e.startDate&&new Date(t.timestamp)<e.startDate||e.endDate&&new Date(t.timestamp)>e.endDate||e.userId&&t.userId!==e.userId||e.entityId&&t.entityId!==e.entityId||e.entityType&&t.entityType!==e.entityType||(null===(n=e.eventTypes)||void 0===n?void 0:n.length)&&!e.eventTypes.includes(t.eventType)||(null===(a=e.categories)||void 0===a?void 0:a.length)&&!e.categories.includes(t.category)||(null===(i=e.severities)||void 0===i?void 0:i.length)&&!e.severities.includes(t.severity))return!1;if(e.searchTerm){let n=e.searchTerm.toLowerCase();return t.description.toLowerCase().includes(n)||t.userName.toLowerCase().includes(n)||(null===(r=t.entityName)||void 0===r?void 0:r.toLowerCase().includes(n))}return!0});i.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime());let r=i.length,s=(n-1)*a;return{entries:i.slice(s,s+a),total:r,page:n,pageSize:a,hasMore:s+a<r}},getEntriesByEntity:(e,n)=>Object.values(t().entries).filter(t=>t.entityType===e&&t.entityId===n).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),getSnapshots:(e,n)=>{let a="".concat(e,":").concat(n);return t().snapshots[a]||[]},compareVersions:(e,n,a)=>{let i=t().snapshots["evaluation:".concat(e)]||t().snapshots["user:".concat(e)];if(!i)return null;let r=i.find(e=>e.version===n),s=i.find(e=>e.version===a);if(!r||!s)return null;let o=t().detectChanges(r.data,s.data);return{previousVersion:n,currentVersion:a,previousTimestamp:r.timestamp,currentTimestamp:s.timestamp,previousUserId:r.userId,currentUserId:s.userId,changes:o}},getStats:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{entries:n}=t().getEntries(e,1,1e5),a={evaluation:0,user:0,authentication:0,system:0,document:0},i={info:0,warning:0,critical:0},r=new Map,s=new Map,o=new Map;return n.forEach(e=>{a[e.category]++,i[e.severity]++;let t=e.userId;r.has(t)?r.get(t).count++:r.set(t,{userName:e.userName,count:1});let n=new Date(e.timestamp).toISOString().split("T")[0];s.set(n,(s.get(n)||0)+1);let c=new Date(e.timestamp).getHours();o.set(c,(o.get(c)||0)+1)}),{totalEntries:n.length,entriesByCategory:a,entriesBySeverity:i,entriesByUser:Array.from(r.entries()).map(e=>{let[t,n]=e;return{userId:t,...n}}).sort((e,t)=>t.count-e.count),entriesByDay:Array.from(s.entries()).map(e=>{let[t,n]=e;return{date:t,count:n}}).sort((e,t)=>e.date.localeCompare(t.date)),mostActiveHours:Array.from(o.entries()).map(e=>{let[t,n]=e;return{hour:t,count:n}}).sort((e,t)=>t.count-e.count)}},detectChanges:function(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=[];return new Set([...Object.keys(e||{}),...Object.keys(n||{})]).forEach(r=>{let s=a?"".concat(a,".").concat(r):r,o=null==e?void 0:e[r],c=null==n?void 0:n[r];if(!["id","createdAt","updatedAt"].includes(r)){if("object"==typeof o&&"object"==typeof c&&null!==o&&null!==c&&!Array.isArray(o)&&!Array.isArray(c)){i.push(...t().detectChanges(o,c,s));return}if(JSON.stringify(o)!==JSON.stringify(c)){let e="modified";null==o&&(e="added"),null==c&&(e="removed"),i.push({field:s,fieldLabel:u[s]||r,previousValue:o,newValue:c,changeType:e})}}}),i},cleanup:n=>{let a=new Date;a.setDate(a.getDate()-n);let{entries:i,snapshots:r}=t(),s=0,o={};Object.entries(i).forEach(e=>{let[t,n]=e;new Date(n.timestamp)>=a?o[t]=n:s++});let c={};return Object.entries(r).forEach(e=>{let[t,n]=e;c[t]=n.slice(-10)}),e({entries:o,snapshots:c}),s},exportLogs:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{entries:n}=t().getEntries(e,1,1e5);return JSON.stringify(n,null,2)},updateRetentionConfig:t=>{e(e=>({retentionConfig:{...e.retentionConfig,...t}}))},markAsSynced:t=>{let n=new Date;e(e=>{let a={...e.entries};return t.forEach(e=>{a[e]&&(a[e]={...a[e],synced:!0,syncedAt:n})}),{entries:a}})},getUnsyncedEntries:()=>Object.values(t().entries).filter(e=>!e.synced)}),{name:"maos-amigas-audit",storage:(0,i.FL)(()=>localStorage),partialize:e=>({entries:e.entries,snapshots:e.snapshots,retentionConfig:e.retentionConfig})}))}}]);