(()=>{var e={};e.id=9555,e.ids=[9555],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},32334:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),a(65054),a(64968),a(35866);var s=a(23191),r=a(88716),i=a(37922),n=a.n(i),l=a(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let c=["",{children:["avaliacao",{children:["[id]",{children:["historico",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,65054)),"C:\\Users\\dramo\\.gemini\\antigravity\\scratch\\maos-amigas-avaliacao\\src\\app\\avaliacao\\[id]\\historico\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,64968)),"C:\\Users\\dramo\\.gemini\\antigravity\\scratch\\maos-amigas-avaliacao\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\dramo\\.gemini\\antigravity\\scratch\\maos-amigas-avaliacao\\src\\app\\avaliacao\\[id]\\historico\\page.tsx"],u="/avaliacao/[id]/historico/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/avaliacao/[id]/historico/page",pathname:"/avaliacao/[id]/historico",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},17648:(e,t,a)=>{Promise.resolve().then(a.bind(a,54024))},86333:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},941:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},39183:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},31540:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},36283:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},11019:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},83855:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},88378:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},58038:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},79635:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},54024:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>L});var s=a(10326),r=a(17577),i=a(35047),n=a(86333),l=a(31540),o=a(76557);let c=(0,o.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),d=(0,o.Z)("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);var u=a(64654),m=a(35396),p=a(30058),h=a(88129),y=a(61824),x=a(6042),g=a(36283),v=a(79635),f=a(58038),j=a(88378),N=a(18019),b=a(37202),w=a(87888),_=a(39183),k=a(941),M=a(48998),C=a(61867);let Z={evaluation_created:"Avalia\xe7\xe3o criada",evaluation_updated:"Avalia\xe7\xe3o atualizada",evaluation_deleted:"Avalia\xe7\xe3o exclu\xedda",evaluation_status_changed:"Status da avalia\xe7\xe3o alterado",evaluation_exported:"Avalia\xe7\xe3o exportada",discovery_updated:"Descoberta atualizada",patient_updated:"Dados do paciente atualizados",health_history_updated:"Hist\xf3rico de sa\xfade atualizado",abemid_updated:"ABEMID atualizado",katz_updated:"Katz atualizado",lawton_updated:"Lawton atualizado",safety_checklist_updated:"Checklist de seguran\xe7a atualizado",schedule_updated:"Agenda atualizada",results_calculated:"Resultados calculados",proposal_generated:"Proposta gerada",proposal_sent:"Proposta enviada",proposal_accepted:"Proposta aceita",proposal_rejected:"Proposta rejeitada",contract_generated:"Contrato gerado",contract_signed:"Contrato assinado",user_created:"Usu\xe1rio criado",user_updated:"Usu\xe1rio atualizado",user_deleted:"Usu\xe1rio exclu\xeddo",user_login:"Login realizado",user_logout:"Logout realizado",user_pin_changed:"PIN alterado",user_pin_reset:"PIN resetado",user_locked:"Usu\xe1rio bloqueado",user_unlocked:"Usu\xe1rio desbloqueado",sync_started:"Sincroniza\xe7\xe3o iniciada",sync_completed:"Sincroniza\xe7\xe3o conclu\xedda",sync_failed:"Sincroniza\xe7\xe3o falhou",data_exported:"Dados exportados",data_imported:"Dados importados"},D={evaluation:"Avalia\xe7\xe3o",user:"Usu\xe1rio",authentication:"Autentica\xe7\xe3o",system:"Sistema",document:"Documento"},S={evaluation:g.Z,user:v.Z,authentication:f.Z,system:j.Z,document:g.Z},z={info:{bg:"bg-blue-100",icon:N.Z,color:"text-blue-600"},warning:{bg:"bg-yellow-100",icon:b.Z,color:"text-yellow-600"},critical:{bg:"bg-red-100",icon:w.Z,color:"text-red-600"}};function A({change:e}){let t=e=>null==e?"(vazio)":"boolean"==typeof e?e?"Sim":"N\xe3o":Array.isArray(e)?e.join(", ")||"(vazio)":"object"==typeof e?JSON.stringify(e):String(e);return(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 text-sm py-1",children:[(0,s.jsxs)("span",{className:"font-medium text-neutral-700",children:[e.fieldLabel,":"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["added"!==e.changeType&&s.jsx("span",{className:"px-2 py-0.5 bg-red-50 text-red-600 rounded line-through text-xs",children:t(e.previousValue)}),"removed"!==e.changeType&&(0,s.jsxs)(s.Fragment,{children:["modified"===e.changeType&&s.jsx(_.Z,{className:"w-3 h-3 text-neutral-400"}),s.jsx("span",{className:"px-2 py-0.5 bg-green-50 text-green-600 rounded text-xs",children:t(e.newValue)})]})]})]})}function T({entry:e,isLast:t}){let[a,i]=(0,r.useState)(!1),n=S[e.category],l=z[e.severity],o=l.icon,c=e.changes&&e.changes.length>0;return(0,s.jsxs)("div",{className:"relative flex gap-4",children:[!t&&s.jsx("div",{className:"absolute left-5 top-10 w-0.5 h-full bg-neutral-200"}),s.jsx("div",{className:(0,C.cn)("relative z-10 w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",l.bg),children:s.jsx(o,{className:(0,C.cn)("w-5 h-5",l.color)})}),s.jsx("div",{className:"flex-1 pb-6",children:(0,s.jsxs)(p.E.div,{className:(0,C.cn)("bg-white rounded-lg border border-neutral-200 p-4",c&&"cursor-pointer hover:border-neutral-300"),onClick:()=>c&&i(!a),children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-neutral-900",children:Z[e.eventType]}),s.jsx("p",{className:"text-sm text-neutral-500 mt-0.5",children:e.description})]}),c&&s.jsx(p.E.div,{animate:{rotate:a?180:0},className:"text-neutral-400",children:s.jsx(k.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-3 text-xs text-neutral-400",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[s.jsx(M.Z,{className:"w-3 h-3"}),(0,y.WU)(new Date(e.timestamp),"dd/MM/yyyy '\xe0s' HH:mm",{locale:x.F})]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[s.jsx(v.Z,{className:"w-3 h-3"}),e.userName]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[s.jsx(n,{className:"w-3 h-3"}),D[e.category]]})]}),s.jsx(h.M,{children:a&&c&&(0,s.jsxs)(p.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-4 pt-4 border-t border-neutral-100 overflow-hidden",children:[s.jsx("p",{className:"text-xs font-medium text-neutral-500 mb-2",children:"Altera\xe7\xf5es realizadas:"}),s.jsx("div",{className:"space-y-1",children:e.changes.map((e,t)=>s.jsx(A,{change:e},t))})]})})]})})]})}function E({entries:e,maxItems:t,onLoadMore:a,hasMore:i=!1}){let n=(0,r.useMemo)(()=>{let a=new Map;return(t?e.slice(0,t):e).forEach(e=>{let t=(0,y.WU)(new Date(e.timestamp),"yyyy-MM-dd");a.has(t)||a.set(t,[]),a.get(t).push(e)}),Array.from(a.entries()).map(([e,t])=>({date:e,label:(0,y.WU)(new Date(e),"EEEE, dd 'de' MMMM",{locale:x.F}),entries:t}))},[e,t]);return 0===e.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx(M.Z,{className:"w-12 h-12 text-neutral-300 mx-auto mb-4"}),s.jsx("p",{className:"text-neutral-500",children:"Nenhum registro encontrado"})]}):(0,s.jsxs)("div",{className:"space-y-8",children:[n.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"h-px flex-1 bg-neutral-200"}),s.jsx("span",{className:"text-sm font-medium text-neutral-500 capitalize",children:e.label}),s.jsx("div",{className:"h-px flex-1 bg-neutral-200"})]}),s.jsx("div",{children:e.entries.map((t,a)=>s.jsx(T,{entry:t,isLast:a===e.entries.length-1},t.id))})]},e.date)),i&&a&&s.jsx("div",{className:"text-center pt-4",children:s.jsx("button",{onClick:a,className:"btn-secondary",children:"Carregar mais"})})]})}var H=a(21405),P=a(83855),U=a(11019);function I({entityId:e,entityType:t}){let{getSnapshots:a,compareVersions:i}=(0,u.k)(),n=a(t,e),[l,o]=(0,r.useState)(n.length>=2?n[n.length-2].version:null),[c,m]=(0,r.useState)(n.length>=1?n[n.length-1].version:null),h=(0,r.useMemo)(()=>null===l||null===c?null:i(e,l,c),[e,l,c,i]);if(n.length<2)return(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx(d,{className:"w-12 h-12 text-neutral-300 mx-auto mb-4"}),s.jsx("p",{className:"text-neutral-500",children:"\xc9 necess\xe1rio ter pelo menos 2 vers\xf5es para comparar"}),(0,s.jsxs)("p",{className:"text-sm text-neutral-400 mt-1",children:["Vers\xf5es dispon\xedveis: ",n.length]})]});let x=e=>null==e?"—":"boolean"==typeof e?e?"Sim":"N\xe3o":Array.isArray(e)?e.join(", ")||"—":e instanceof Date?(0,y.WU)(e,"dd/MM/yyyy HH:mm"):"object"==typeof e?JSON.stringify(e,null,2):String(e);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("label",{className:"label",children:"Vers\xe3o anterior"}),s.jsx("select",{value:l||"",onChange:e=>o(Number(e.target.value)),className:"input-base",children:n.slice(0,-1).map(e=>(0,s.jsxs)("option",{value:e.version,children:["Vers\xe3o ",e.version," - ",(0,y.WU)(new Date(e.timestamp),"dd/MM HH:mm")]},e.id))})]}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(d,{className:"w-6 h-6 text-neutral-400"})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("label",{className:"label",children:"Vers\xe3o atual"}),s.jsx("select",{value:c||"",onChange:e=>m(Number(e.target.value)),className:"input-base",children:n.slice(1).map(e=>(0,s.jsxs)("option",{value:e.version,children:["Vers\xe3o ",e.version," - ",(0,y.WU)(new Date(e.timestamp),"dd/MM HH:mm")]},e.id))})]})]}),h&&s.jsx("div",{className:"bg-neutral-50 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(M.Z,{className:"w-4 h-4 text-neutral-400"}),(0,s.jsxs)("span",{className:"text-neutral-600",children:[(0,y.WU)(new Date(h.previousTimestamp),"dd/MM '\xe0s' HH:mm")," →"," ",(0,y.WU)(new Date(h.currentTimestamp),"dd/MM '\xe0s' HH:mm")]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(H.Z,{className:"w-4 h-4 text-neutral-400"}),(0,s.jsxs)("span",{className:"text-neutral-600",children:[h.changes.length," altera\xe7\xe3o",1!==h.changes.length?"\xf5es":""]})]})]})}),h&&h.changes.length>0&&(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-medium text-neutral-900",children:"Altera\xe7\xf5es detectadas"}),s.jsx("div",{className:"divide-y divide-neutral-100",children:h.changes.map((e,t)=>(0,s.jsxs)(p.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"py-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:["added"===e.changeType&&s.jsx("span",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center",children:s.jsx(P.Z,{className:"w-3 h-3 text-green-600"})}),"removed"===e.changeType&&s.jsx("span",{className:"w-5 h-5 rounded-full bg-red-100 flex items-center justify-center",children:s.jsx(U.Z,{className:"w-3 h-3 text-red-600"})}),"modified"===e.changeType&&s.jsx("span",{className:"w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx(H.Z,{className:"w-3 h-3 text-blue-600"})}),s.jsx("span",{className:"font-medium text-neutral-800",children:e.fieldLabel})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 ml-7",children:["added"!==e.changeType&&(0,s.jsxs)("div",{className:"p-2 bg-red-50 rounded text-sm",children:[s.jsx("p",{className:"text-xs text-red-600 font-medium mb-1",children:"Antes"}),s.jsx("p",{className:"text-red-700 break-words",children:x(e.previousValue)})]}),"removed"!==e.changeType&&(0,s.jsxs)("div",{className:(0,C.cn)("p-2 bg-green-50 rounded text-sm","added"===e.changeType&&"col-span-2"),children:[s.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"Depois"}),s.jsx("p",{className:"text-green-700 break-words",children:x(e.newValue)})]})]})]},t))})]}),h&&0===h.changes.length&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-neutral-500",children:"Nenhuma diferen\xe7a encontrada entre as vers\xf5es"})})]})}function L(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),a=e.id,{getEntriesByEntity:o,exportLogs:p}=(0,u.k)(),{getEvaluationById:h}=(0,m.q)(),[y,x]=(0,r.useState)("timeline"),[g,v]=(0,r.useState)(1),f=h(a),j=o("evaluation",a),N=j.slice(0,20*g),b=j.length>N.length;return f?(0,s.jsxs)("div",{className:"min-h-screen bg-neutral-50",children:[s.jsx("div",{className:"bg-white border-b border-neutral-200 sticky top-0 z-10",children:(0,s.jsxs)("div",{className:"container-mobile py-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("button",{onClick:()=>t.back(),className:"p-2 -ml-2 text-neutral-600 hover:bg-neutral-100 rounded-lg",children:s.jsx(n.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-bold text-neutral-900",children:"Hist\xf3rico de Altera\xe7\xf5es"}),s.jsx("p",{className:"text-sm text-neutral-500",children:f.patient.fullName||"Paciente n\xe3o informado"})]}),s.jsx("button",{onClick:()=>{let e=new Blob([p({entityId:a})],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=`historico-avaliacao-${a}.json`,s.click(),URL.revokeObjectURL(t)},className:"p-2 text-neutral-600 hover:bg-neutral-100 rounded-lg",title:"Exportar hist\xf3rico",children:s.jsx(l.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>x("timeline"),className:(0,C.cn)("flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-lg font-medium transition-colors","timeline"===y?"bg-brand-500 text-white":"bg-neutral-100 text-neutral-600 hover:bg-neutral-200"),children:[s.jsx(c,{className:"w-4 h-4"}),"Timeline"]}),(0,s.jsxs)("button",{onClick:()=>x("compare"),className:(0,C.cn)("flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-lg font-medium transition-colors","compare"===y?"bg-brand-500 text-white":"bg-neutral-100 text-neutral-600 hover:bg-neutral-200"),children:[s.jsx(d,{className:"w-4 h-4"}),"Comparar"]})]})]})}),s.jsx("div",{className:"container-mobile py-6",children:"timeline"===y?s.jsx(E,{entries:N,hasMore:b,onLoadMore:()=>v(e=>e+1)}):s.jsx(I,{entityId:a,entityType:"evaluation"})})]}):s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("p",{className:"text-neutral-500",children:"Avalia\xe7\xe3o n\xe3o encontrada"})})}},64654:(e,t,a)=>{"use strict";a.d(t,{k:()=>d});var s=a(60114),r=a(85251),i=a(47463),n=a(79171),l=a(23005);let o={evaluation_created:{category:"evaluation",severity:"info"},evaluation_updated:{category:"evaluation",severity:"info"},evaluation_deleted:{category:"evaluation",severity:"warning"},evaluation_status_changed:{category:"evaluation",severity:"info"},evaluation_exported:{category:"document",severity:"info"},discovery_updated:{category:"evaluation",severity:"info"},patient_updated:{category:"evaluation",severity:"info"},health_history_updated:{category:"evaluation",severity:"info"},abemid_updated:{category:"evaluation",severity:"info"},katz_updated:{category:"evaluation",severity:"info"},lawton_updated:{category:"evaluation",severity:"info"},safety_checklist_updated:{category:"evaluation",severity:"info"},schedule_updated:{category:"evaluation",severity:"info"},results_calculated:{category:"evaluation",severity:"info"},proposal_generated:{category:"document",severity:"info"},proposal_sent:{category:"document",severity:"info"},proposal_accepted:{category:"document",severity:"info"},proposal_rejected:{category:"document",severity:"warning"},contract_generated:{category:"document",severity:"info"},contract_signed:{category:"document",severity:"info"},user_created:{category:"user",severity:"info"},user_updated:{category:"user",severity:"info"},user_deleted:{category:"user",severity:"warning"},user_login:{category:"authentication",severity:"info"},user_logout:{category:"authentication",severity:"info"},user_pin_changed:{category:"authentication",severity:"info"},user_pin_reset:{category:"authentication",severity:"warning"},user_locked:{category:"authentication",severity:"critical"},user_unlocked:{category:"authentication",severity:"warning"},sync_started:{category:"system",severity:"info"},sync_completed:{category:"system",severity:"info"},sync_failed:{category:"system",severity:"critical"},data_exported:{category:"system",severity:"info"},data_imported:{category:"system",severity:"warning"}},c={"patient.fullName":"Nome completo","patient.birthDate":"Data de nascimento","patient.cpf":"CPF","patient.maritalStatus":"Estado civil","patient.preferredName":"Nome preferido","healthHistory.neurologicalConditions":"Condi\xe7\xf5es neurol\xf3gicas","healthHistory.cardiovascularConditions":"Condi\xe7\xf5es cardiovasculares","healthHistory.medicationCount":"Quantidade de medicamentos","abemid.consciousness":"N\xedvel de consci\xeancia","abemid.breathing":"Padr\xe3o respirat\xf3rio","abemid.totalScore":"Pontua\xe7\xe3o total ABEMID","abemid.indicatedProfessional":"Profissional indicado","katz.bathing":"Banho","katz.dressing":"Vestir","katz.totalScore":"Pontua\xe7\xe3o total Katz","katz.classification":"Classifica\xe7\xe3o Katz","schedule.startTime":"Hor\xe1rio de in\xedcio","schedule.endTime":"Hor\xe1rio de t\xe9rmino","schedule.weekDays":"Dias da semana",status:"Status"},d=(0,s.Ue)()((0,r.tJ)((e,t)=>({entries:{},snapshots:{},retentionConfig:{retentionDays:365,archiveBeforeDelete:!0,autoCleanup:!0,cleanupSchedule:"weekly"},log:(t,a,s,r,c={})=>{let d=n.t.getState().session,u=(0,i.Z)(),m=o[t],p={id:u,timestamp:new Date,eventType:t,category:m.category,severity:m.severity,userId:d?.userId||"system",userName:d?.user.fullName||"Sistema",userRole:d?.user.role||"system",entityType:a,entityId:s,entityName:c.entityName,description:r,changes:c.changes,metadata:c.metadata,deviceId:(0,l.ni)(),sessionId:d?.token||"no-session",synced:!1};return e(e=>({entries:{...e.entries,[u]:p}})),u},createSnapshot:(a,s,r)=>{let l=n.t.getState().session,o=`${a}:${s}`,c=t().snapshots[o]||[],d=c.length+1,u={id:(0,i.Z)(),entityType:a,entityId:s,version:d,timestamp:new Date,userId:l?.userId||"system",userName:l?.user.fullName||"Sistema",data:r,checksum:function(e){let t=JSON.stringify(e),a=0;for(let e=0;e<t.length;e++)a=(a<<5)-a+t.charCodeAt(e),a&=a;return Math.abs(a).toString(16).padStart(8,"0")}(r)};e(e=>({snapshots:{...e.snapshots,[o]:[...c,u]}}))},getEntries:(e={},a=1,s=20)=>{let r=Object.values(t().entries).filter(t=>{if(e.startDate&&new Date(t.timestamp)<e.startDate||e.endDate&&new Date(t.timestamp)>e.endDate||e.userId&&t.userId!==e.userId||e.entityId&&t.entityId!==e.entityId||e.entityType&&t.entityType!==e.entityType||e.eventTypes?.length&&!e.eventTypes.includes(t.eventType)||e.categories?.length&&!e.categories.includes(t.category)||e.severities?.length&&!e.severities.includes(t.severity))return!1;if(e.searchTerm){let a=e.searchTerm.toLowerCase();return t.description.toLowerCase().includes(a)||t.userName.toLowerCase().includes(a)||t.entityName?.toLowerCase().includes(a)}return!0});r.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime());let i=r.length,n=(a-1)*s;return{entries:r.slice(n,n+s),total:i,page:a,pageSize:s,hasMore:n+s<i}},getEntriesByEntity:(e,a)=>Object.values(t().entries).filter(t=>t.entityType===e&&t.entityId===a).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),getSnapshots:(e,a)=>{let s=`${e}:${a}`;return t().snapshots[s]||[]},compareVersions:(e,a,s)=>{let r=`evaluation:${e}`,i=`user:${e}`,n=t().snapshots[r]||t().snapshots[i];if(!n)return null;let l=n.find(e=>e.version===a),o=n.find(e=>e.version===s);if(!l||!o)return null;let c=t().detectChanges(l.data,o.data);return{previousVersion:a,currentVersion:s,previousTimestamp:l.timestamp,currentTimestamp:o.timestamp,previousUserId:l.userId,currentUserId:o.userId,changes:c}},getStats:(e={})=>{let{entries:a}=t().getEntries(e,1,1e5),s={evaluation:0,user:0,authentication:0,system:0,document:0},r={info:0,warning:0,critical:0},i=new Map,n=new Map,l=new Map;return a.forEach(e=>{s[e.category]++,r[e.severity]++;let t=e.userId;i.has(t)?i.get(t).count++:i.set(t,{userName:e.userName,count:1});let a=new Date(e.timestamp).toISOString().split("T")[0];n.set(a,(n.get(a)||0)+1);let o=new Date(e.timestamp).getHours();l.set(o,(l.get(o)||0)+1)}),{totalEntries:a.length,entriesByCategory:s,entriesBySeverity:r,entriesByUser:Array.from(i.entries()).map(([e,t])=>({userId:e,...t})).sort((e,t)=>t.count-e.count),entriesByDay:Array.from(n.entries()).map(([e,t])=>({date:e,count:t})).sort((e,t)=>e.date.localeCompare(t.date)),mostActiveHours:Array.from(l.entries()).map(([e,t])=>({hour:e,count:t})).sort((e,t)=>t.count-e.count)}},detectChanges:(e,a,s="")=>{let r=[];return new Set([...Object.keys(e||{}),...Object.keys(a||{})]).forEach(i=>{let n=s?`${s}.${i}`:i,l=e?.[i],o=a?.[i];if(!["id","createdAt","updatedAt"].includes(i)){if("object"==typeof l&&"object"==typeof o&&null!==l&&null!==o&&!Array.isArray(l)&&!Array.isArray(o)){r.push(...t().detectChanges(l,o,n));return}if(JSON.stringify(l)!==JSON.stringify(o)){let e="modified";null==l&&(e="added"),null==o&&(e="removed"),r.push({field:n,fieldLabel:c[n]||i,previousValue:l,newValue:o,changeType:e})}}}),r},cleanup:a=>{let s=new Date;s.setDate(s.getDate()-a);let{entries:r,snapshots:i}=t(),n=0,l={};Object.entries(r).forEach(([e,t])=>{new Date(t.timestamp)>=s?l[e]=t:n++});let o={};return Object.entries(i).forEach(([e,t])=>{o[e]=t.slice(-10)}),e({entries:l,snapshots:o}),n},exportLogs:(e={})=>{let{entries:a}=t().getEntries(e,1,1e5);return JSON.stringify(a,null,2)},updateRetentionConfig:t=>{e(e=>({retentionConfig:{...e.retentionConfig,...t}}))},markAsSynced:t=>{let a=new Date;e(e=>{let s={...e.entries};return t.forEach(e=>{s[e]&&(s[e]={...s[e],synced:!0,syncedAt:a})}),{entries:s}})},getUnsyncedEntries:()=>Object.values(t().entries).filter(e=>!e.synced)}),{name:"maos-amigas-audit",storage:(0,r.FL)(()=>localStorage),partialize:e=>({entries:e.entries,snapshots:e.snapshots,retentionConfig:e.retentionConfig})}))},65054:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`C:\Users\dramo\.gemini\antigravity\scratch\maos-amigas-avaliacao\src\app\avaliacao\[id]\historico\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[8948,5121,2822,1824,7815],()=>a(32334));module.exports=s})();