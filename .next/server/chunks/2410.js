exports.id=2410,exports.ids=[2410],exports.modules={87458:(e,t,a)=>{Promise.resolve().then(a.bind(a,23047))},23047:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var r=a(10326),s=a(94001),n=a(90434),i=a(47290),o=a(17577),c=a(88129),l=a(30058),d=a(54937),u=a(75290),m=a(37202),y=a(94019),g=a(87757),p=a(32933),h=a(21405),f=a(29039),x=a(6042),v=a(60114),b=a(85251),w=a(47463);let N={baseUrl:process.env.NEXT_PUBLIC_API_URL||"https://api.maosamigas.com.br",timeout:3e4,retryAttempts:3,retryDelay:1e3};function j(e){let t={"Content-Type":"application/json","X-Client-Version":"1.0.0","X-Device-Id":""};return e&&(t.Authorization=`Bearer ${e}`),t}async function C(e,t,a=N.retryAttempts){try{let r=new AbortController,s=setTimeout(()=>r.abort(),N.timeout),n=await fetch(e,{...t,signal:r.signal});if(clearTimeout(s),!n.ok&&a>0&&n.status>=500)return await new Promise(e=>setTimeout(e,N.retryDelay)),C(e,t,a-1);return n}catch(r){if(a>0&&r instanceof Error&&"AbortError"!==r.name)return await new Promise(e=>setTimeout(e,N.retryDelay)),C(e,t,a-1);throw r}}let S={async getEvaluations(e,t){try{let a=new URLSearchParams;t&&a.set("since",t.toISOString());let r=await C(`${N.baseUrl}/evaluations?${a}`,{method:"GET",headers:j(e)}),s=await r.json();return{success:!0,data:s.evaluations,meta:s.meta}}catch{return{success:!1,error:{code:"NETWORK_ERROR",message:"Erro de conex\xe3o"}}}},async createEvaluation(e,t){try{let a=await C(`${N.baseUrl}/evaluations`,{method:"POST",headers:j(e),body:JSON.stringify(t)}),r=await a.json();if(!a.ok)return{success:!1,error:r.error};return{success:!0,data:r.evaluation,meta:r.meta}}catch{return{success:!1,error:{code:"NETWORK_ERROR",message:"Erro de conex\xe3o"}}}},async updateEvaluation(e,t,a,r){try{let s=j(e);void 0!==r&&(s["If-Match"]=`"${r}"`);let n=await C(`${N.baseUrl}/evaluations/${t}`,{method:"PATCH",headers:s,body:JSON.stringify(a)}),i=await n.json();if(409===n.status)return{success:!1,error:{code:"CONFLICT",message:"Conflito de vers\xe3o"},data:i.serverData};if(!n.ok)return{success:!1,error:i.error};return{success:!0,data:i.evaluation,meta:i.meta}}catch{return{success:!1,error:{code:"NETWORK_ERROR",message:"Erro de conex\xe3o"}}}},async deleteEvaluation(e,t){try{let a=await C(`${N.baseUrl}/evaluations/${t}`,{method:"DELETE",headers:j(e)});if(!a.ok){let e=await a.json();return{success:!1,error:e.error}}return{success:!0}}catch{return{success:!1,error:{code:"NETWORK_ERROR",message:"Erro de conex\xe3o"}}}},async pushAuditLogs(e,t){try{let a=await C(`${N.baseUrl}/audit-logs/batch`,{method:"POST",headers:j(e),body:JSON.stringify({logs:t})}),r=await a.json();return{success:!0,data:r.savedIds}}catch{return{success:!1,error:{code:"NETWORK_ERROR",message:"Erro de conex\xe3o"}}}},async healthCheck(){try{return(await fetch(`${N.baseUrl}/health`,{method:"GET",headers:{"Content-Type":"application/json"}})).ok}catch{return!1}}};var D=a(79171),E=a(35396),_=a(64654);let A=(0,v.Ue)()((0,b.tJ)((e,t)=>({lastSyncAt:null,isSyncing:!1,pendingCount:0,conflictCount:0,errorCount:0,progress:0,config:{autoSync:!0,syncIntervalMinutes:5,syncOnReconnect:!0,maxRetries:3,compressData:!0,syncAuditLogs:!0},operationQueue:[],conflicts:[],updateConfig:t=>{e(e=>({config:{...e.config,...t}}))},queueOperation:t=>{let a={...t,id:(0,w.Z)(),timestamp:new Date,retryCount:0};e(e=>({operationQueue:[...e.operationQueue,a],pendingCount:e.pendingCount+1}))},removeOperation:t=>{e(e=>({operationQueue:e.operationQueue.filter(e=>e.id!==t),pendingCount:Math.max(0,e.pendingCount-1)}))},sync:async()=>{let{isSyncing:a,config:r}=t();if(a)return{success:!1,pushed:0,pulled:0,conflicts:[],errors:[{entityId:"",error:"J\xe1 sincronizando"}],duration:0};let s=Date.now();e({isSyncing:!0,progress:0});try{if(!await t().checkConnectivity())return e({isSyncing:!1}),{success:!1,pushed:0,pulled:0,conflicts:[],errors:[{entityId:"",error:"Sem conex\xe3o"}],duration:Date.now()-s};e({progress:20});let a=D.t.getState(),n=E.q.getState(),i=a.session?.token;if(!i)return e({isSyncing:!1}),{success:!1,pushed:0,pulled:0,conflicts:[],errors:[{entityId:"",error:"N\xe3o autenticado"}],duration:Date.now()-s};let{operationQueue:o}=t(),c=0;for(let e of o)"evaluation"===e.entityType&&"update"===e.type&&(await S.updateEvaluation(i,e.entityId,e.data)).success&&(t().removeOperation(e.id),c++);e({progress:60});let{lastSyncAt:l}=t(),d=await S.getEvaluations(i,l||void 0),u=0;if(d.success&&d.data)for(let e of d.data){let t=n.getEvaluationById(e.id);(!t||new Date(e.updatedAt)>new Date(t.updatedAt))&&(n.updateEvaluation(e.id,e),u++)}if(e({progress:90}),r.syncAuditLogs){let e=_.k.getState(),t=e.getUnsyncedEntries();if(t.length>0){let a=await S.pushAuditLogs(i,t);a.success&&a.data&&e.markAsSynced(a.data)}}return e({isSyncing:!1,progress:100,lastSyncAt:new Date}),{success:!0,pushed:c,pulled:u,conflicts:[],errors:[],duration:Date.now()-s}}catch(t){return e({isSyncing:!1,progress:0}),{success:!1,pushed:0,pulled:0,conflicts:[],errors:[{entityId:"",error:String(t)}],duration:Date.now()-s}}},resolveConflict:async(a,r,s)=>{let n;let i=t().conflicts.find(e=>e.id===a);if(!i)return;let o=E.q.getState();switch(r){case"local":n=i.localData;break;case"remote":n=i.remoteData;break;case"merged":n=s||{...i.remoteData,...i.localData}}o.updateEvaluation(i.entityId,n),e(e=>({conflicts:e.conflicts.map(e=>e.id===a?{...e,resolvedAt:new Date,resolution:r}:e),conflictCount:Math.max(0,e.conflictCount-1)}))},checkConnectivity:async()=>("undefined"==typeof navigator||!!navigator.onLine)&&S.healthCheck(),retryOperation:t=>{e(e=>({operationQueue:e.operationQueue.map(e=>e.id===t?{...e,retryCount:e.retryCount+1,lastError:void 0}:e)}))},getEntitySyncStatus:e=>{let{operationQueue:a,conflicts:r}=t(),s=a.some(t=>t.entityId===e);return r.some(t=>t.entityId===e&&!t.resolvedAt)?"conflict":s?"pending":"synced"}}),{name:"maos-amigas-sync",storage:(0,b.FL)(()=>localStorage),partialize:e=>({lastSyncAt:e.lastSyncAt,operationQueue:e.operationQueue,conflicts:e.conflicts,config:e.config})}));var k=a(43226),T=a(61867);function I({minimal:e=!1}){let{lastSyncAt:t,isSyncing:a,pendingCount:s,conflictCount:n,errorCount:i,progress:v,sync:b}=A(),{isOnline:w}=(0,k.j)(),[N,j]=(0,o.useState)(!1),C=w?a?{icon:u.Z,color:"text-brand-500",bg:"bg-brand-50",label:"Sincronizando...",animate:!0}:n>0?{icon:m.Z,color:"text-warning-500",bg:"bg-warning-50",label:`${n} conflito(s)`}:i>0?{icon:y.Z,color:"text-danger-500",bg:"bg-danger-50",label:`${i} erro(s)`}:s>0?{icon:g.Z,color:"text-brand-500",bg:"bg-brand-50",label:`${s} pendente(s)`}:{icon:p.Z,color:"text-success-500",bg:"bg-success-50",label:"Sincronizado"}:{icon:d.Z,color:"text-neutral-400",bg:"bg-neutral-100",label:"Offline"},S=C.icon,D=async()=>{!a&&w&&await b()};return e?r.jsx("button",{onClick:D,disabled:a||!w,className:(0,T.cn)("p-2 rounded-full transition-colors",C.bg,C.color),title:C.label,children:r.jsx(S,{className:(0,T.cn)("w-5 h-5",C.animate&&"animate-spin")})}):(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>j(!N),className:(0,T.cn)("flex items-center gap-2 px-3 py-2 rounded-lg transition-colors",C.bg,C.color),children:[r.jsx(S,{className:(0,T.cn)("w-4 h-4",C.animate&&"animate-spin")}),r.jsx("span",{className:"text-sm font-medium",children:C.label})]}),r.jsx(c.M,{children:N&&(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-0 top-full mt-2 w-72 bg-white rounded-xl shadow-strong border border-neutral-200 p-4 z-50",children:[r.jsx("h3",{className:"font-medium text-neutral-900 mb-3",children:"Status de Sincroniza\xe7\xe3o"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-neutral-500",children:"Conex\xe3o"}),r.jsx("span",{className:(0,T.cn)("flex items-center gap-1",w?"text-success-600":"text-neutral-400"),children:w?(0,r.jsxs)(r.Fragment,{children:[r.jsx(p.Z,{className:"w-4 h-4"})," Online"]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(d.Z,{className:"w-4 h-4"})," Offline"]})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-neutral-500",children:"\xdaltima sync"}),r.jsx("span",{className:"text-neutral-700",children:t?(0,f.Q)(new Date(t),{locale:x.F,addSuffix:!0}):"Nunca"})]}),s>0&&(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-neutral-500",children:"Pendentes"}),r.jsx("span",{className:"text-brand-600 font-medium",children:s})]}),a&&r.jsx("div",{className:"pt-2",children:r.jsx("div",{className:"h-1.5 bg-neutral-100 rounded-full overflow-hidden",children:r.jsx(l.E.div,{className:"h-full bg-brand-500",initial:{width:0},animate:{width:`${v}%`}})})}),r.jsx("button",{onClick:D,disabled:a||!w,className:"w-full mt-2 btn-primary text-sm",children:a?(0,r.jsxs)(r.Fragment,{children:[r.jsx(u.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Sincronizando..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Sincronizar agora"]})})]})]})})]})}function O(){let{user:e}=(0,s.aC)();return r.jsx("header",{className:"fixed top-0 left-0 right-0 h-16 z-40 transition-colors duration-200",style:{backgroundColor:"rgb(var(--color-bg-elevated))",borderBottom:"1px solid rgb(var(--color-border))"},children:(0,r.jsxs)("div",{className:"h-full px-4 flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-3",children:(0,r.jsxs)(n.default,{href:"/pro",className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xl",children:"\uD83E\uDD1D"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-semibold text-sm leading-tight",style:{color:"rgb(var(--color-text))"},children:"M\xe3os Amigas"}),r.jsx("p",{className:"text-xs text-brand-500",children:(()=>{switch(e?.role){case"caregiver":return"Cuidador(a)";case"nurse":return"Enfermeiro(a)";case"nurse_tech":return"T\xe9c. Enfermagem";default:return"Profissional"}})()})]})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(I,{minimal:!0}),r.jsx(i.L,{})]})]})})}var R=a(35047),$=a(95920),P=a(37358),Z=a(24061),z=a(36283),U=a(79635);function L(){let e=(0,R.usePathname)(),{user:t}=(0,s.aC)(),a=(()=>{switch(t?.role){case"admin":case"caregiver":return"/pro/cuidador";case"nurse":return"/pro/enfermeiro";case"nurse_tech":return"/pro/tecnico";default:return"/pro"}})(),i=[{href:a,icon:$.Z,label:"In\xedcio"},{href:`${a}/agenda`,icon:P.Z,label:"Agenda"},{href:`${a}/pacientes`,icon:Z.Z,label:"Pacientes"},{href:`${a}/evolucoes`,icon:z.Z,label:"Evolu\xe7\xf5es"},{href:`${a}/perfil`,icon:U.Z,label:"Perfil"}];return r.jsx("nav",{className:"pb-safe-bottom transition-colors duration-200",style:{backgroundColor:"rgb(var(--color-bg-elevated))",borderTop:"1px solid rgb(var(--color-border))"},children:r.jsx("div",{className:"flex items-center justify-around py-2",children:i.map(t=>{let a=e===t.href;return(0,r.jsxs)(n.default,{href:t.href,className:(0,T.cn)("flex flex-col items-center gap-1 px-3 py-1.5 rounded-lg transition-all duration-200 min-w-[60px]",a?"text-brand-500":""),style:{color:a?void 0:"rgb(var(--color-text-tertiary))",backgroundColor:a?"rgba(30, 138, 173, 0.1)":"transparent"},children:[r.jsx(t.icon,{className:(0,T.cn)("w-6 h-6 transition-colors",a&&"text-brand-500")}),r.jsx("span",{className:(0,T.cn)("text-xs transition-colors",a&&"font-medium"),children:t.label})]},t.href)})})})}let M=["admin","caregiver","nurse","nurse_tech","physiotherapist","nutritionist","psychologist","speech_therapist","occupational_therapist","physician"];function B({children:e}){let{user:t,isLoading:a}=(0,s.aC)();return a?r.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"rgb(var(--color-bg))"},children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-500"})}):M.includes(t?.role||"")?(0,r.jsxs)("div",{className:"min-h-screen",style:{backgroundColor:"rgb(var(--color-bg))"},children:[r.jsx(O,{}),r.jsx("main",{className:"pt-16 pb-20 min-h-screen",children:r.jsx("div",{className:"container-mobile py-4",children:e})}),r.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50",children:r.jsx(L,{})})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"rgb(var(--color-bg))"},children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"mb-4",style:{color:"rgb(var(--color-text-secondary))"},children:"Acesso n\xe3o autorizado"}),r.jsx("a",{href:"/login",className:"text-brand-500 hover:text-brand-400 hover:underline",children:"Fazer login"})]})})}},47290:(e,t,a)=>{"use strict";a.d(t,{L:()=>g});var r=a(10326),s=a(17577),n=a(30058),i=a(88129),o=a(6507),c=a(67211),l=a(94019),d=a(29039),u=a(6042),m=a(4566),y=a(61867);function g(){let[e,t]=(0,s.useState)(!1),a=(0,s.useRef)(null),{notifications:g,unreadCount:p,markAsRead:h,markAllAsRead:f,deleteNotification:x}=(0,m.G)(),v=g.slice(0,10),b=e=>{switch(e){case"urgent":return"border-l-danger-500";case"high":return"border-l-warning-500";case"medium":return"border-l-brand-500";default:return"border-l-neutral-300"}};return(0,r.jsxs)("div",{className:"relative",ref:a,children:[(0,r.jsxs)("button",{onClick:()=>t(!e),className:"relative p-2 rounded-full hover:bg-neutral-100 transition-colors","aria-label":`Notifica\xe7\xf5es${p>0?` (${p} n\xe3o lidas)`:""}`,children:[r.jsx(o.Z,{className:"w-5 h-5 text-neutral-600"}),p>0&&r.jsx(n.E.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-danger-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:p>9?"9+":p})]}),r.jsx(i.M,{children:e&&(0,r.jsxs)(n.E.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"absolute right-0 top-full mt-2 w-80 sm:w-96 bg-white rounded-xl shadow-strong border border-neutral-200 overflow-hidden z-50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-100",children:[r.jsx("h3",{className:"font-semibold text-neutral-900",children:"Notifica\xe7\xf5es"}),p>0&&(0,r.jsxs)("button",{onClick:f,className:"flex items-center gap-1 text-xs text-brand-600 hover:text-brand-700",children:[r.jsx(c.Z,{className:"w-4 h-4"}),"Marcar todas como lidas"]})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:0===v.length?(0,r.jsxs)("div",{className:"py-12 text-center",children:[r.jsx(o.Z,{className:"w-10 h-10 text-neutral-300 mx-auto mb-3"}),r.jsx("p",{className:"text-neutral-500",children:"Nenhuma notifica\xe7\xe3o"})]}):r.jsx("div",{className:"divide-y divide-neutral-100",children:v.map(e=>r.jsx(n.E.div,{layout:!0,className:(0,y.cn)("px-4 py-3 hover:bg-neutral-50 transition-colors cursor-pointer","border-l-4",b(e.priority),!e.read&&"bg-brand-50/30"),onClick:()=>{h(e.id),e.actionUrl&&(window.location.href=e.actionUrl)},children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:(0,y.cn)("text-sm",!e.read&&"font-medium"),children:e.title}),r.jsx("p",{className:"text-sm text-neutral-500 mt-0.5 line-clamp-2",children:e.message}),r.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:(0,d.Q)(new Date(e.createdAt),{locale:u.F,addSuffix:!0})})]}),r.jsx("button",{onClick:t=>{t.stopPropagation(),x(e.id)},className:"p-1 text-neutral-400 hover:text-neutral-600 rounded",children:r.jsx(l.Z,{className:"w-4 h-4"})})]})},e.id))})}),g.length>10&&r.jsx("div",{className:"px-4 py-2 border-t border-neutral-100 text-center",children:r.jsx("a",{href:"/notificacoes",className:"text-sm text-brand-600 hover:text-brand-700",children:"Ver todas as notifica\xe7\xf5es"})})]})})]})}},64654:(e,t,a)=>{"use strict";a.d(t,{k:()=>d});var r=a(60114),s=a(85251),n=a(47463),i=a(79171),o=a(23005);let c={evaluation_created:{category:"evaluation",severity:"info"},evaluation_updated:{category:"evaluation",severity:"info"},evaluation_deleted:{category:"evaluation",severity:"warning"},evaluation_status_changed:{category:"evaluation",severity:"info"},evaluation_exported:{category:"document",severity:"info"},discovery_updated:{category:"evaluation",severity:"info"},patient_updated:{category:"evaluation",severity:"info"},health_history_updated:{category:"evaluation",severity:"info"},abemid_updated:{category:"evaluation",severity:"info"},katz_updated:{category:"evaluation",severity:"info"},lawton_updated:{category:"evaluation",severity:"info"},safety_checklist_updated:{category:"evaluation",severity:"info"},schedule_updated:{category:"evaluation",severity:"info"},results_calculated:{category:"evaluation",severity:"info"},proposal_generated:{category:"document",severity:"info"},proposal_sent:{category:"document",severity:"info"},proposal_accepted:{category:"document",severity:"info"},proposal_rejected:{category:"document",severity:"warning"},contract_generated:{category:"document",severity:"info"},contract_signed:{category:"document",severity:"info"},user_created:{category:"user",severity:"info"},user_updated:{category:"user",severity:"info"},user_deleted:{category:"user",severity:"warning"},user_login:{category:"authentication",severity:"info"},user_logout:{category:"authentication",severity:"info"},user_pin_changed:{category:"authentication",severity:"info"},user_pin_reset:{category:"authentication",severity:"warning"},user_locked:{category:"authentication",severity:"critical"},user_unlocked:{category:"authentication",severity:"warning"},sync_started:{category:"system",severity:"info"},sync_completed:{category:"system",severity:"info"},sync_failed:{category:"system",severity:"critical"},data_exported:{category:"system",severity:"info"},data_imported:{category:"system",severity:"warning"}},l={"patient.fullName":"Nome completo","patient.birthDate":"Data de nascimento","patient.cpf":"CPF","patient.maritalStatus":"Estado civil","patient.preferredName":"Nome preferido","healthHistory.neurologicalConditions":"Condi\xe7\xf5es neurol\xf3gicas","healthHistory.cardiovascularConditions":"Condi\xe7\xf5es cardiovasculares","healthHistory.medicationCount":"Quantidade de medicamentos","abemid.consciousness":"N\xedvel de consci\xeancia","abemid.breathing":"Padr\xe3o respirat\xf3rio","abemid.totalScore":"Pontua\xe7\xe3o total ABEMID","abemid.indicatedProfessional":"Profissional indicado","katz.bathing":"Banho","katz.dressing":"Vestir","katz.totalScore":"Pontua\xe7\xe3o total Katz","katz.classification":"Classifica\xe7\xe3o Katz","schedule.startTime":"Hor\xe1rio de in\xedcio","schedule.endTime":"Hor\xe1rio de t\xe9rmino","schedule.weekDays":"Dias da semana",status:"Status"},d=(0,r.Ue)()((0,s.tJ)((e,t)=>({entries:{},snapshots:{},retentionConfig:{retentionDays:365,archiveBeforeDelete:!0,autoCleanup:!0,cleanupSchedule:"weekly"},log:(t,a,r,s,l={})=>{let d=i.t.getState().session,u=(0,n.Z)(),m=c[t],y={id:u,timestamp:new Date,eventType:t,category:m.category,severity:m.severity,userId:d?.userId||"system",userName:d?.user.fullName||"Sistema",userRole:d?.user.role||"system",entityType:a,entityId:r,entityName:l.entityName,description:s,changes:l.changes,metadata:l.metadata,deviceId:(0,o.ni)(),sessionId:d?.token||"no-session",synced:!1};return e(e=>({entries:{...e.entries,[u]:y}})),u},createSnapshot:(a,r,s)=>{let o=i.t.getState().session,c=`${a}:${r}`,l=t().snapshots[c]||[],d=l.length+1,u={id:(0,n.Z)(),entityType:a,entityId:r,version:d,timestamp:new Date,userId:o?.userId||"system",userName:o?.user.fullName||"Sistema",data:s,checksum:function(e){let t=JSON.stringify(e),a=0;for(let e=0;e<t.length;e++)a=(a<<5)-a+t.charCodeAt(e),a&=a;return Math.abs(a).toString(16).padStart(8,"0")}(s)};e(e=>({snapshots:{...e.snapshots,[c]:[...l,u]}}))},getEntries:(e={},a=1,r=20)=>{let s=Object.values(t().entries).filter(t=>{if(e.startDate&&new Date(t.timestamp)<e.startDate||e.endDate&&new Date(t.timestamp)>e.endDate||e.userId&&t.userId!==e.userId||e.entityId&&t.entityId!==e.entityId||e.entityType&&t.entityType!==e.entityType||e.eventTypes?.length&&!e.eventTypes.includes(t.eventType)||e.categories?.length&&!e.categories.includes(t.category)||e.severities?.length&&!e.severities.includes(t.severity))return!1;if(e.searchTerm){let a=e.searchTerm.toLowerCase();return t.description.toLowerCase().includes(a)||t.userName.toLowerCase().includes(a)||t.entityName?.toLowerCase().includes(a)}return!0});s.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime());let n=s.length,i=(a-1)*r;return{entries:s.slice(i,i+r),total:n,page:a,pageSize:r,hasMore:i+r<n}},getEntriesByEntity:(e,a)=>Object.values(t().entries).filter(t=>t.entityType===e&&t.entityId===a).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),getSnapshots:(e,a)=>{let r=`${e}:${a}`;return t().snapshots[r]||[]},compareVersions:(e,a,r)=>{let s=`evaluation:${e}`,n=`user:${e}`,i=t().snapshots[s]||t().snapshots[n];if(!i)return null;let o=i.find(e=>e.version===a),c=i.find(e=>e.version===r);if(!o||!c)return null;let l=t().detectChanges(o.data,c.data);return{previousVersion:a,currentVersion:r,previousTimestamp:o.timestamp,currentTimestamp:c.timestamp,previousUserId:o.userId,currentUserId:c.userId,changes:l}},getStats:(e={})=>{let{entries:a}=t().getEntries(e,1,1e5),r={evaluation:0,user:0,authentication:0,system:0,document:0},s={info:0,warning:0,critical:0},n=new Map,i=new Map,o=new Map;return a.forEach(e=>{r[e.category]++,s[e.severity]++;let t=e.userId;n.has(t)?n.get(t).count++:n.set(t,{userName:e.userName,count:1});let a=new Date(e.timestamp).toISOString().split("T")[0];i.set(a,(i.get(a)||0)+1);let c=new Date(e.timestamp).getHours();o.set(c,(o.get(c)||0)+1)}),{totalEntries:a.length,entriesByCategory:r,entriesBySeverity:s,entriesByUser:Array.from(n.entries()).map(([e,t])=>({userId:e,...t})).sort((e,t)=>t.count-e.count),entriesByDay:Array.from(i.entries()).map(([e,t])=>({date:e,count:t})).sort((e,t)=>e.date.localeCompare(t.date)),mostActiveHours:Array.from(o.entries()).map(([e,t])=>({hour:e,count:t})).sort((e,t)=>t.count-e.count)}},detectChanges:(e,a,r="")=>{let s=[];return new Set([...Object.keys(e||{}),...Object.keys(a||{})]).forEach(n=>{let i=r?`${r}.${n}`:n,o=e?.[n],c=a?.[n];if(!["id","createdAt","updatedAt"].includes(n)){if("object"==typeof o&&"object"==typeof c&&null!==o&&null!==c&&!Array.isArray(o)&&!Array.isArray(c)){s.push(...t().detectChanges(o,c,i));return}if(JSON.stringify(o)!==JSON.stringify(c)){let e="modified";null==o&&(e="added"),null==c&&(e="removed"),s.push({field:i,fieldLabel:l[i]||n,previousValue:o,newValue:c,changeType:e})}}}),s},cleanup:a=>{let r=new Date;r.setDate(r.getDate()-a);let{entries:s,snapshots:n}=t(),i=0,o={};Object.entries(s).forEach(([e,t])=>{new Date(t.timestamp)>=r?o[e]=t:i++});let c={};return Object.entries(n).forEach(([e,t])=>{c[e]=t.slice(-10)}),e({entries:o,snapshots:c}),i},exportLogs:(e={})=>{let{entries:a}=t().getEntries(e,1,1e5);return JSON.stringify(a,null,2)},updateRetentionConfig:t=>{e(e=>({retentionConfig:{...e.retentionConfig,...t}}))},markAsSynced:t=>{let a=new Date;e(e=>{let r={...e.entries};return t.forEach(e=>{r[e]&&(r[e]={...r[e],synced:!0,syncedAt:a})}),{entries:r}})},getUnsyncedEntries:()=>Object.values(t().entries).filter(e=>!e.synced)}),{name:"maos-amigas-audit",storage:(0,s.FL)(()=>localStorage),partialize:e=>({entries:e.entries,snapshots:e.snapshots,retentionConfig:e.retentionConfig})}))},4566:(e,t,a)=>{"use strict";a.d(t,{G:()=>i});var r=a(60114),s=a(85251),n=a(47463);let i=(0,r.Ue)()((0,s.tJ)((e,t)=>({notifications:[],unreadCount:0,addNotification:t=>{let a=(0,n.Z)(),r=new Date,s={...t,id:a,createdAt:r,read:!1,deliveredVia:["in_app"]};return e(e=>({notifications:[s,...e.notifications].slice(0,100),unreadCount:e.unreadCount+1})),a},markAsRead:t=>{e(e=>{let a=e.notifications.find(e=>e.id===t);return!a||a.read?e:{notifications:e.notifications.map(e=>e.id===t?{...e,read:!0,readAt:new Date}:e),unreadCount:Math.max(0,e.unreadCount-1)}})},markAllAsRead:()=>{let t=new Date;e(e=>({notifications:e.notifications.map(e=>e.read?e:{...e,read:!0,readAt:t}),unreadCount:0}))},deleteNotification:t=>{e(e=>{let a=e.notifications.find(e=>e.id===t);return{notifications:e.notifications.filter(e=>e.id!==t),unreadCount:a&&!a.read?Math.max(0,e.unreadCount-1):e.unreadCount}})},clearAll:()=>{e({notifications:[],unreadCount:0})},getNotificationsByType:e=>t().notifications.filter(t=>t.type===e),getUnreadNotifications:()=>t().notifications.filter(e=>!e.read),getNotificationsByPriority:e=>t().notifications.filter(t=>t.priority===e),removeExpired:()=>{let a=new Date,{notifications:r}=t(),s=r.filter(e=>!e.expiresAt||new Date(e.expiresAt)>a),n=r.length-s.length;if(n>0){let t=r.filter(e=>e.expiresAt&&new Date(e.expiresAt)<=a&&!e.read).length;e(e=>({notifications:s,unreadCount:Math.max(0,e.unreadCount-t)}))}return n}}),{name:"maos-amigas-notifications",storage:(0,s.FL)(()=>localStorage)}))},37659:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`C:\Users\dramo\.gemini\antigravity\scratch\maos-amigas-avaliacao\src\app\(portals)\pro\layout.tsx#default`)}};